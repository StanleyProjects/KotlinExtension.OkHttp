<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>RequestBuilderUtil.kt</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">lib</a> &gt; <a href="index.source.html" class="el_package">sp.kx.okhttp</a> &gt; <span class="el_source">RequestBuilderUtil.kt</span></div><h1>RequestBuilderUtil.kt</h1><pre class="source lang-java linenums">package sp.kx.okhttp

import okhttp3.HttpUrl.Companion.toHttpUrl
import okhttp3.MediaType
import okhttp3.Request
import okhttp3.RequestBody
import okio.BufferedSink

<span class="fc" id="L9">private val emptyRequestBody = object : RequestBody() {</span>
<span class="fc" id="L10">    private val array = ByteArray(0)</span>

    override fun contentType(): MediaType? {
<span class="fc" id="L13">        return null</span>
    }

    override fun contentLength(): Long {
<span class="fc" id="L17">        return 0</span>
    }

    override fun writeTo(sink: BufferedSink) {
<span class="nc" id="L21">        sink.write(array, 0, 0)</span>
<span class="nc" id="L22">    }</span>
}

fun requestBuilder(builder: Request.Builder.() -&gt; Unit): Request.Builder {
<span class="fc" id="L26">    return Request.Builder().also(builder)</span>
}

fun requestBuilder(url: String): Request.Builder {
<span class="nc" id="L30">    return requestBuilder {</span>
<span class="nc" id="L31">        url(url.toHttpUrl())</span>
<span class="nc" id="L32">    }</span>
}

fun requestBuilder(url: String, pathSegment: String): Request.Builder {
<span class="fc" id="L36">    return requestBuilder {</span>
<span class="fc" id="L37">        url(httpUrl(url = url, pathSegment = pathSegment))</span>
<span class="fc" id="L38">    }</span>
}

fun requestBuilder(url: String, headers: Map&lt;String, String&gt;): Request.Builder {
<span class="fc" id="L42">    return requestBuilder {</span>
<span class="fc" id="L43">        url(url.toHttpUrl())</span>
<span class="fc" id="L44">        headers.forEach { (key, value) -&gt;</span>
<span class="fc" id="L45">            addHeader(key, value)</span>
<span class="fc" id="L46">        }</span>
<span class="fc" id="L47">    }</span>
}

fun requestBuilder(url: String, header: Pair&lt;String, String&gt;): Request.Builder {
<span class="fc" id="L51">    return requestBuilder {</span>
<span class="fc" id="L52">        url(url.toHttpUrl())</span>
<span class="fc" id="L53">        val (key, value) = header</span>
<span class="fc" id="L54">        addHeader(key, value)</span>
<span class="fc" id="L55">    }</span>
}

fun requestBuilder(url: String, pathSegment: String, header: Pair&lt;String, String&gt;): Request.Builder {
<span class="nc" id="L59">    return requestBuilder{</span>
<span class="nc" id="L60">        url(httpUrl(url = url, pathSegment = pathSegment))</span>
<span class="nc" id="L61">        val (key, value) = header</span>
<span class="nc" id="L62">        addHeader(key, value)</span>
<span class="nc" id="L63">    }</span>
}

fun requestBuilder(url: String, pathSegment: String, headers: Map&lt;String, String&gt;): Request.Builder {
<span class="fc" id="L67">    return requestBuilder {</span>
<span class="fc" id="L68">        url(httpUrl(url = url, pathSegment = pathSegment))</span>
<span class="fc" id="L69">        headers.forEach { (key, value) -&gt;</span>
<span class="fc" id="L70">            addHeader(key, value)</span>
<span class="fc" id="L71">        }</span>
<span class="fc" id="L72">    }</span>
}

fun requestBuilder(
    url: String,
    queries: Map&lt;String, String&gt;,
    headers: Map&lt;String, String&gt;
): Request.Builder {
<span class="fc" id="L80">    return requestBuilder {</span>
<span class="fc" id="L81">        url(httpUrl(url = url, queries = queries))</span>
<span class="fc" id="L82">        headers.forEach { (key, value) -&gt;</span>
<span class="fc" id="L83">            addHeader(key, value)</span>
<span class="fc" id="L84">        }</span>
<span class="fc" id="L85">    }</span>
}

fun requestBuilder(
    url: String,
    queries: Map&lt;String, String&gt;,
    header: Pair&lt;String, String&gt;
): Request.Builder {
<span class="fc" id="L93">    return requestBuilder {</span>
<span class="fc" id="L94">        url(httpUrl(url = url, queries = queries))</span>
<span class="fc" id="L95">        val (key, value) = header</span>
<span class="fc" id="L96">        addHeader(key, value)</span>
<span class="fc" id="L97">    }</span>
}

fun requestBuilder(
    url: String,
    method: Method,
    body: RequestBody
): Request.Builder {
<span class="fc" id="L105">    return requestBuilder {</span>
<span class="fc" id="L106">        url(url.toHttpUrl())</span>
<span class="fc" id="L107">        when (method) {</span>
<span class="pc bpc" id="L108" title="1 of 2 branches missed.">            Method.POST -&gt; post(body)</span>
        }
<span class="fc" id="L110">    }</span>
}

fun requestBuilder(
    url: String,
    headers: Map&lt;String, String&gt;,
    method: Method,
    body: RequestBody
): Request.Builder {
<span class="fc" id="L119">    return requestBuilder {</span>
<span class="fc" id="L120">        url(url.toHttpUrl())</span>
<span class="fc" id="L121">        headers.forEach { (key, value) -&gt;</span>
<span class="fc" id="L122">            addHeader(key, value)</span>
<span class="fc" id="L123">        }</span>
<span class="fc" id="L124">        when (method) {</span>
<span class="pc bpc" id="L125" title="1 of 2 branches missed.">            Method.POST -&gt; post(body)</span>
        }
<span class="fc" id="L127">    }</span>
}

fun requestBuilder(
    url: String,
    header: Pair&lt;String, String&gt;,
    method: Method,
    body: RequestBody
): Request.Builder {
<span class="fc" id="L136">    return requestBuilder {</span>
<span class="fc" id="L137">        url(url.toHttpUrl())</span>
<span class="fc" id="L138">        val (key, value) = header</span>
<span class="fc" id="L139">        addHeader(key, value)</span>
<span class="fc" id="L140">        when (method) {</span>
<span class="pc bpc" id="L141" title="1 of 2 branches missed.">            Method.POST -&gt; post(body)</span>
        }
<span class="fc" id="L143">    }</span>
}

fun requestBuilder(
    url: String,
    pathSegment: String,
    query: Pair&lt;String, String&gt;,
    headers: Map&lt;String, String&gt;,
    method: Method,
    body: RequestBody
): Request.Builder {
<span class="nc" id="L154">    return requestBuilder {</span>
<span class="nc" id="L155">        url(httpUrl(url = url, pathSegment = pathSegment, query = query))</span>
<span class="nc" id="L156">        headers.forEach { (key, value) -&gt;</span>
<span class="nc" id="L157">            addHeader(key, value)</span>
<span class="nc" id="L158">        }</span>
<span class="nc" id="L159">        when (method) {</span>
<span class="nc bnc" id="L160" title="All 2 branches missed.">            Method.POST -&gt; post(body)</span>
        }
<span class="nc" id="L162">    }</span>
}

fun requestBuilder(
    url: String,
    pathSegment: String,
    query: Pair&lt;String, String&gt;,
    header: Pair&lt;String, String&gt;,
    method: Method,
    body: RequestBody
): Request.Builder {
<span class="nc" id="L173">    return requestBuilder {</span>
<span class="nc" id="L174">        url(httpUrl(url = url, pathSegment = pathSegment, query = query))</span>
<span class="nc" id="L175">        val (key, value) = header</span>
<span class="nc" id="L176">        addHeader(key, value)</span>
<span class="nc" id="L177">        when (method) {</span>
<span class="nc bnc" id="L178" title="All 2 branches missed.">            Method.POST -&gt; post(body)</span>
        }
<span class="nc" id="L180">    }</span>
}

fun requestBuilder(
    url: String,
    query: Pair&lt;String, String&gt;,
    header: Pair&lt;String, String&gt;,
    method: Method,
    body: RequestBody
): Request.Builder {
<span class="nc" id="L190">    return requestBuilder {</span>
<span class="nc" id="L191">        url(httpUrl(url = url, query = query))</span>
<span class="nc" id="L192">        val (key, value) = header</span>
<span class="nc" id="L193">        addHeader(key, value)</span>
<span class="nc" id="L194">        when (method) {</span>
<span class="nc bnc" id="L195" title="All 2 branches missed.">            Method.POST -&gt; post(body)</span>
        }
<span class="nc" id="L197">    }</span>
}

fun requestBuilder(
    url: String,
    queries: Map&lt;String, String&gt;,
    headers: Map&lt;String, String&gt;,
    method: Method,
    body: RequestBody
): Request.Builder {
<span class="fc" id="L207">    return requestBuilder {</span>
<span class="fc" id="L208">        url(httpUrl(url = url, queries = queries))</span>
<span class="fc" id="L209">        headers.forEach { (key, value) -&gt;</span>
<span class="fc" id="L210">            addHeader(key, value)</span>
<span class="fc" id="L211">        }</span>
<span class="fc" id="L212">        when (method) {</span>
<span class="pc bpc" id="L213" title="1 of 2 branches missed.">            Method.POST -&gt; post(body)</span>
        }
<span class="fc" id="L215">    }</span>
}

fun requestBuilder(
    url: String,
    queries: Map&lt;String, String&gt;,
    headers: Map&lt;String, String&gt;,
    method: Method
): Request.Builder {
<span class="fc" id="L224">    return requestBuilder {</span>
<span class="fc" id="L225">        url(httpUrl(url = url, queries = queries))</span>
<span class="fc" id="L226">        headers.forEach { (key, value) -&gt;</span>
<span class="fc" id="L227">            addHeader(key, value)</span>
<span class="fc" id="L228">        }</span>
<span class="fc" id="L229">        when (method) {</span>
<span class="pc bpc" id="L230" title="1 of 2 branches missed.">            Method.POST -&gt; post(emptyRequestBody)</span>
        }
<span class="fc" id="L232">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>